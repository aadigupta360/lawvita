<%- include('header') %><div class="max-w-7xl mx-auto px-4 mb-20"><div class="flex justify-between items-center mb-8"><h1 class="text-3xl font-bold">Admin Console</h1><a href="/logout" class="text-red-400">Logout</a></div><div class="flex flex-wrap gap-2 mb-8 bg-white/5 p-2 rounded-lg"><button onclick="showTab('notes')" class="tab-btn flex-1 py-2 rounded hover:bg-white/10 text-sm font-bold bg-white/20" id="btn-notes">Notes</button><button onclick="showTab('gallery')" class="tab-btn flex-1 py-2 rounded hover:bg-white/10 text-sm font-bold" id="btn-gallery">Gallery</button><button onclick="showTab('media')" class="tab-btn flex-1 py-2 rounded hover:bg-white/10 text-sm font-bold" id="btn-media">Media</button><button onclick="showTab('users')" class="tab-btn flex-1 py-2 rounded hover:bg-white/10 text-sm font-bold" id="btn-users">Students</button><button onclick="showTab('settings')" class="tab-btn flex-1 py-2 rounded hover:bg-white/10 text-sm font-bold" id="btn-settings">Settings</button></div><div id="notes" class="tab-content"><div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="glass p-6 h-fit"><h2 class="text-xl font-bold mb-4 text-pink-400">Upload Note</h2><form action="/admin/add-note" method="POST" enctype="multipart/form-data" class="space-y-4"><input type="text" name="title" placeholder="Title" class="glass-input" required><input type="text" name="category" placeholder="Category" class="glass-input" required><input type="number" name="price" placeholder="Price (â‚¹)" class="glass-input" required><div class="bg-black/20 p-3 rounded text-sm"><p class="text-gray-400 mb-2">Upload Source:</p><div class="flex gap-4 mb-2"><label><input type="radio" name="type" value="file" checked onclick="toggleSource('file')"> Local PDF</label><label><input type="radio" name="type" value="link" onclick="toggleSource('link')"> Link</label></div><input type="file" name="noteFile" id="inp-file" class="glass-input" accept="application/pdf"><input type="text" name="fileLink" id="inp-link" placeholder="URL" class="glass-input hidden"></div><button class="w-full btn btn-primary">Publish</button></form></div><div class="lg:col-span-2 glass p-6"><h2 class="text-xl font-bold mb-4">Existing Notes</h2><div class="space-y-3 max-h-[500px] overflow-y-auto"><% allNotes.forEach(n=>{ %><div class="flex justify-between items-center bg-white/5 p-3 rounded"><div><strong><%= n.title %></strong><span class="text-xs text-gray-400 ml-2"><%= n.fileType==='file'?'ðŸ”’ PDF':'ðŸ”— Link' %></span></div><a href="/admin/delete-note/<%= n.id %>" class="text-red-400 text-xs font-bold border border-red-500 px-2 py-1 rounded">Delete</a></div><% }) %></div></div></div></div><div id="gallery" class="tab-content hidden"><div class="glass p-6 mb-8"><form action="/admin/add-gallery" method="POST" enctype="multipart/form-data" class="flex gap-4"><input type="file" name="galleryImage" class="glass-input" accept="image/*" required><button class="btn btn-primary">Upload</button></form></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><% gallery.forEach(img=>{ %><div class="relative group rounded-xl overflow-hidden border border-white/10"><img src="<%= img.url %>" class="w-full h-32 object-cover"><a href="/admin/delete-gallery/<%= img.id %>" class="absolute inset-0 bg-red-600/80 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition">Delete</a></div><% }) %></div></div><div id="media" class="tab-content hidden"><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="glass p-6"><h2 class="text-xl font-bold mb-4">Hero</h2><form action="/admin/update-hero" method="POST" enctype="multipart/form-data" class="space-y-4"><input type="file" name="heroFile" class="glass-input" accept="image/*,video/mp4"><button class="w-full btn btn-primary">Update</button></form></div><div class="glass p-6"><h2 class="text-xl font-bold mb-4">Video</h2><form action="/admin/update-hero" method="POST" class="space-y-4"><input type="text" name="youtubeUrl" placeholder="Embed URL" class="glass-input"><button class="w-full btn btn-primary">Update</button></form></div></div></div><div id="users" class="tab-content hidden"><div class="glass p-6"><h2 class="text-xl font-bold mb-4">Students</h2><table class="w-full text-left text-sm"><thead class="text-gray-400 border-b border-white/10"><tr><th class="p-2">Name</th><th class="p-2">Action</th></tr></thead><tbody><% allUsers.forEach(u=>{ if(!u.isAdmin){ %><tr class="border-b border-white/5"><td class="p-2"><%= u.name %> <br><span class="text-xs opacity-50"><%= u.email %></span></td><td class="p-2 flex gap-2"><a href="/admin/toggle-ban/<%= u.id %>" class="<%= u.isBanned?'text-green-400':'text-yellow-400' %> font-bold text-xs"><%= u.isBanned?'Unban':'Ban' %></a> <a href="/admin/delete-user/<%= u.id %>" class="text-red-500 font-bold text-xs" onclick="return confirm('Permanently delete?')">Delete</a></td></tr><% }}) %></tbody></table></div></div><div id="settings" class="tab-content hidden"><div class="glass p-6 max-w-md border border-red-500/30"><h2 class="text-xl font-bold mb-4 text-red-300">Change Admin Password</h2><form action="/admin/change-password" method="POST" class="space-y-4"><input type="password" name="newPassword" placeholder="New Password" class="glass-input" required><button class="w-full btn btn-danger">Update</button></form></div></div></div><script>function showTab(id){document.querySelectorAll('.tab-content').forEach(el=>el.classList.add('hidden'));document.querySelectorAll('.tab-btn').forEach(el=>el.classList.remove('bg-white/20'));document.getElementById(id).classList.remove('hidden');document.getElementById('btn-'+id).classList.add('bg-white/20');}function toggleSource(type){if(type==='link'){document.getElementById('inp-link').classList.remove('hidden');document.getElementById('inp-file').classList.add('hidden');}else{document.getElementById('inp-link').classList.add('hidden');document.getElementById('inp-file').classList.remove('hidden');}}</script><%- include('footer') %>